def shell_sort(arr):
    # Начальная величина шага (gap) задаётся равной половине длины массива
    gap = len(arr) // 2
    
    # Продолжаем уменьшать шаг, пока он не достигнет нуля
    while gap > 0:
        # Проводим сортировку вставками с заданным шагом
        for i in range(gap, len(arr)):
            temp = arr[i]  # Сохраняем текущий элемент
            j = i
            # Передвигаем предыдущие элементы вперёд, пока условие соблюдается
            while j >= gap and arr[j-gap] > temp:
                arr[j] = arr[j-gap]  # Смещаем элемент на шаг вперед
                j -= gap
            arr[j] = temp  # Ставим сохранённый элемент на правильную позицию
        # Уменьшаем величину шага вдвое
        gap //= 2

# Пример использования
if __name__ == "__main__":
    array = [64, 34, 25, 12, 22, 11, 90]
    print("Исходный массив:", array)
    shell_sort(array)
    print("Отсортированный массив:", array)

Пример выполнения:
Исходный массив: [64, 34, 25, 12, 22, 11, 90]
Отсортированный массив: [11, 12, 22, 25, 34, 64, 90]